<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Personal Manager</title>
<style>
:root{
  --verde:#064420; --blu:#0a4d68; --chiaro:#f0f8f8; --bianco:#fff;
  --ombra: rgba(0,0,0,0.15); --raggio:14px;
}
html,body{height:100%;margin:0;}
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,var(--verde)20%,var(--blu)80%);
  display:flex;align-items:center;justify-content:center;
  color:#222;overflow:hidden;
}

/* wrapper */
.app-wrapper{
  width:95%;max-width:1250px;height:90vh;
  background:var(--bianco);border-radius:var(--raggio);
  display:grid;grid-template-columns:220px 1fr 400px;
  box-shadow:0 10px 30px var(--ombra);overflow:hidden;
}

/* sidebar */
.sidebar{
  background:linear-gradient(to bottom,var(--verde),var(--blu));
  color:var(--bianco);padding:1.5rem 1rem;display:flex;
  flex-direction:column;justify-content:space-between;
}
.sidebar h2{font-size:1.3rem;margin:0 0 1.5rem 0;text-align:center;}
.nav{display:flex;flex-direction:column;gap:1rem;}
.nav button{
  background:transparent;color:var(--bianco);border:none;
  padding:0.8rem;text-align:left;border-radius:10px;cursor:pointer;
}
.nav button.active, .nav button:hover{
  background:rgba(255,255,255,0.12); transform:translateX(4px);
}

/* main area */
main{
  background:var(--chiaro); padding:1.5rem; overflow:auto;
}
.screen{display:none;}
.screen.active{display:block;}
.card{
  background:var(--bianco);border-radius:var(--raggio);
  padding:1rem 1.2rem;box-shadow:0 2px 8px var(--ombra);
  margin-bottom:1rem;
}
.card h3{color:var(--blu);margin-top:0;}

/* chat */
.chat{
  display:flex;flex-direction:column;height:100%;
  border-left:1px solid #ddd;background:#f9f9f9;
  min-height:0;
}
.chat-header{
  background:linear-gradient(to right,var(--verde),var(--blu));
  color:var(--bianco);padding:1rem;font-weight:600;text-align:center;
  flex-shrink:0;
}
.chat-messages{
  flex:1;padding:1rem;display:flex;flex-direction:column;gap:0.6rem;
  overflow-y:auto; scroll-behavior:smooth; min-height:0;
  background:#fafafa;
}
.message{
  max-width:80%; padding:0.7rem 1rem; border-radius:var(--raggio);
  box-shadow:0 2px 6px var(--ombra); line-height:1.4; word-wrap:break-word;
}
.message.AI{ align-self:flex-start; background:var(--blu); color:var(--bianco); border-bottom-left-radius:0; }
.message.Utente{ align-self:flex-end; background:var(--verde); color:var(--bianco); border-bottom-right-radius:0; }

.chat-footer{
  padding:1rem;border-top:1px solid #ddd;display:flex;flex-direction:column;gap:0.6rem;
  background:var(--bianco);flex-shrink:0;
}

.suggestions{display:flex;flex-wrap:wrap;gap:0.5rem;}
.suggestions button{
  background:#e8f2f1;border:none;border-radius:12px;padding:0.4rem 0.8rem;cursor:pointer;color:var(--blu);
}
.suggestions button:hover{background:var(--blu);color:var(--bianco);}

.input-row{display:flex;gap:0.6rem;align-items:center;}
input{flex:1;padding:0.7rem 1rem;border:1px solid #ccc;border-radius:12px;outline:none;}
button.send{background:linear-gradient(135deg,var(--verde),var(--blu));color:var(--bianco);border:none;border-radius:12px;padding:0.8rem 1.1rem;cursor:pointer;}

/* switching */
.switch-page{ text-align:center;margin-top:1rem; }
.switch-page button{ background:#fff;color:var(--blu);border-radius:10px;padding:0.5rem 1rem;border:none;cursor:pointer; }

/* scrollbars */
.chat-messages::-webkit-scrollbar{ width:8px; }
.chat-messages::-webkit-scrollbar-thumb{ background:var(--blu); border-radius:4px; }

/* responsive */
@media (max-width:1000px){
  .app-wrapper{ grid-template-columns:200px 1fr; }
  .chat{ display:none; }
}

/* integrazioni */
.integration-box{
  border:1px solid #ddd;border-radius:12px;padding:10px;margin-bottom:10px;background:#f5f5f5;
}
.integration-box h4{margin:0 0 5px 0;color:var(--verde);}
.integration-box button{margin-top:5px;}
</style>
</head>
<body>

<!-- USER PAGE -->
<div class="app-wrapper" id="userPage">
  <aside class="sidebar">
    <div>
      <h2>Routine Manager</h2>
      <nav class="nav" id="userNav">
        <button class="active" data-screen="dashboard">ğŸ  Dashboard</button>
        <button data-screen="calendar">ğŸ“… Calendar</button>
        <button data-screen="routine">ğŸ§  Routine</button>
        <button data-screen="integrations">ğŸ”— Integrazioni & Gruppi</button>
      </nav>
    </div>
    <div>
      <div class="switch-page">
        <button id="toDev">ğŸ‘¨â€ğŸ’» Vai a Developer</button>
      </div>
      <div style="font-size:0.8rem;opacity:0.8;text-align:center;margin-top:10px;">Â© 2025 Personal Manager</div>
    </div>
  </aside>

  <main id="mainContent">
    <section id="dashboard" class="screen active">
      <h1>Benvenuto ğŸ‘‹</h1>
      <div class="card"><h3>ğŸ“… Agenda</h3><p>10:00 - Riunione progetto</p><p>17:30 - Treno</p></div>
      <div class="card"><h3>ğŸ§˜ Benessere</h3><p>Pausa alle 15:00</p></div>
    </section>

    <section id="calendar" class="screen">
      <h1>ğŸ“… Calendario</h1>
      <div class="card"><ul><li>10:00 - Sync Team</li><li>13:00 - Pranzo</li></ul></div>
    </section>

    <section id="routine" class="screen">
      <h1>ğŸ§  Routine</h1>
      <div class="card"><ul><li>Meditazione</li><li>Focus time 9:00â€“11:00</li></ul></div>
    </section>

    <section id="integrations" class="screen">
      <h1>ğŸ”— Integrazioni & Gruppi</h1>
      <div class="integration-box">
        <h4>App Collegate</h4>
        <ul id="connectedApps">
          <li>Google Calendar (collegato)</li>
        </ul>
        <button class="send" id="connectAppBtn">+ Collega App</button>
      </div>
      <div class="integration-box">
        <h4>Gruppi</h4>
        <div id="groupsList"><p>Nessun gruppo creato</p></div>
        <button class="send" id="createGroupBtn">+ Crea gruppo</button>
      </div>
    </section>
  </main>

  <section class="chat" aria-label="chat">
    <div class="chat-header">Assistente AI</div>
    <div class="chat-messages" id="messages" aria-live="polite"></div>
    <div class="chat-footer">
      <div class="suggestions" id="suggestions">
        <button data-msg="mostrami il calendario">ğŸ“… calendario</button>
        <button data-msg="migliora la mia routine">ğŸ§  routine</button>
        <button data-msg="dammi un consiglio">âœ¨ consiglio</button>
      </div>
      <div class="input-row">
        <input id="userInput" type="text" placeholder="Scrivi o tocca un suggerimento..." />
        <button class="send" id="sendBtn">Invia</button>
      </div>
    </div>
  </section>
</div>

<!-- DEV PAGE -->
<div class="app-wrapper" id="devPage" style="display:none;">
  <aside class="sidebar">
    <div>
      <h2>Developer Hub</h2>
      <nav class="nav" id="devNav">
        <button class="active" data-screen="devOverview">ğŸ— Overview</button>
        <button data-screen="devGit">ğŸ™ GitHub</button>
        <button data-screen="devAPI">ğŸ”Œ API</button>
      </nav>
    </div>
    <div>
      <div class="switch-page">
        <button id="toUser">ğŸ  Torna a User</button>
      </div>
      <div style="font-size:0.8rem;opacity:0.8;text-align:center;margin-top:10px;">Â© 2025 Personal Manager</div>
    </div>
  </aside>

  <main id="mainDev">
    <section id="devOverview" class="screen active">
      <h1>Developer Dashboard</h1>
      <div class="card"><h3>Build</h3><p>Ultima: 09:12 âœ…</p></div>
    </section>
    <section id="devGit" class="screen">
      <h1>GitHub</h1>
      <div class="card"><p>PR aperte: 2 Â· Issue: 3</p></div>
    </section>
    <section id="devAPI" class="screen">
      <h1>API Monitor</h1>
      <div class="card"><p>Latency media: 120ms</p></div>
    </section>
  </main>
</div>

<script>
/* NAV USER */
const userNavButtons = document.querySelectorAll('#userNav button');
userNavButtons.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    userNavButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('#mainContent .screen').forEach(s=>s.classList.remove('active'));
    const screen = document.getElementById(btn.dataset.screen);
    if(screen) screen.classList.add('active');
  });
});

/* NAV DEV */
const devNavButtons = document.querySelectorAll('#devNav button');
devNavButtons.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    devNavButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('#mainDev .screen').forEach(s=>s.classList.remove('active'));
    const screen = document.getElementById(btn.dataset.screen);
    if(screen) screen.classList.add('active');
  });
});

/* SWITCH PAGE */
document.getElementById('toDev').addEventListener('click', ()=> {
  document.getElementById('userPage').style.display = 'none';
  document.getElementById('devPage').style.display = 'grid';
  devNavButtons[0].click();
});
document.getElementById('toUser').addEventListener('click', ()=> {
  document.getElementById('devPage').style.display = 'none';
  document.getElementById('userPage').style.display = 'grid';
  userNavButtons[0].click();
});

/* CHAT */
const messagesEl = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const suggestions = document.getElementById('suggestions');

const messages = [
  { sender:'AI', text:'Ciao! Sono il tuo assistente personale ğŸŒ¿' },
  { sender:'AI', text:'Posso aiutarti con calendario, gruppi e suggerimenti.' }
];

function renderMessages(){
  messagesEl.innerHTML = '';
  messages.forEach(m=>{
    const d = document.createElement('div');
    d.className = 'message ' + (m.sender === 'AI' ? 'AI' : 'Utente');
    d.textContent = m.text;
    messagesEl.appendChild(d);
  });
  const last = messagesEl.lastElementChild;
  if(last) last.scrollIntoView({behavior:'auto', block:'end'});
}

function aiReply(text){
  const t = text.toLowerCase();
  let reply = "Mi dispiace, puoi ripetere?";
  if(t.includes('calendario')) reply = "Hai riunione alle 10:00 e treno alle 17:30.";
  else if(t.includes('routine')) reply = "Routine suggerita: meditazione e blocco focus alle 9:00.";
  else if(t.includes('consiglio')) reply = "Consiglio: pausa di 15 minuti dopo la riunione.";
  else if(t.includes('collega') || t.includes('integrazione')) reply = "Vai su Integrazioni & Gruppi per aggiungere app o creare gruppi.";
  messages.push({sender:'AI', text:reply});
  renderMessages();
}

function sendMessage(txt = null){
  const text = txt || (userInput && userInput.value && userInput.value.trim());
  if(!text) return;
  messages.push({sender:'Utente', text});
  if(userInput) userInput.value = '';
  renderMessages();
  setTimeout(()=> aiReply(text), 350);
}

renderMessages();
sendBtn && sendBtn.addEventListener('click', ()=> sendMessage());
userInput && userInput.addEventListener('keyup', e=> { if(e.key==='Enter') sendMessage(); });
suggestions && suggestions.addEventListener('click', (ev)=>{
  const btn = ev.target.closest('button[data-msg]');
  if(btn) sendMessage(btn.dataset.msg);
});

/* INTEGRAZIONI E GRUPPI SIMULATI */
document.getElementById('connectAppBtn').addEventListener('click', ()=>{
  const ul = document.getElementById('connectedApps');
  const li = document.createElement('li'); li.textContent = 'GitHub (collegato)';
  ul.appendChild(li);
});

document.getElementById('createGroupBtn').addEventListener('click', ()=>{
  const groups = document.getElementById('groupsList');
  groups.innerHTML = '<div><strong>Team Progetto</strong><p>Member: Maria, Luca</p></div>';
});
</script>
</body>
</html>
